---
title:  چالش جدید، تعمیر pygtk
category: یادداشت
tags: pygtk rtl bug
uuid: 5e3fbde8-42e6-4d4e-b367-c805fc887c7f
---
من معمولا از یک برنامه ویکی بنام [_زیم_][زیم] برای نوشتن یادداشت‌های روزانه و نوت‌برداری استفاده می‌کنم. این برنامه هم مثل gedit ‏[مشکل راست به چپ نویسی][باگ‌سیزده‌ساله] دارد. هرچند مشکل gedit با آپدیت‌های اخیر برطرف شده ولی این اتفاق در مورد زیم نیفتاد. پس تصمیم گرفتم زیم رو تعمیر کنم.

به طور خلاصه مشکل زیم هم اینه که وقتی کلید کنترل رو نگه می‌داریم و با کلیدهای جهت قصد حرکت در جمله رو داریم جهت حرکت نشانگر تایپ برعکس انتظار ماست. اول فکر کردم مشکل باید از زیم باشه و یک باگ برای زیم [ثبت][باگ‌زیم] کردم. ولی با مقداری کنکاش متوجه شدم که مشکل از pygtk است و زیم نقشی در این باگ نداره. برای اطمینان سورس pygtk رو دانلود کردم و دموی برنامه رو اجرا کردم و مطمئن شدم که ایراد در دمو هم وجود داره.

    $ git clone git://git.gnome.org/pygtk && cd pygtk
    $ python examples/pygtk-demo/pygtk-demo.py

اگر اون مشکل قبلی رو دنبال کرده باشید، در جریان هستید که مشکل از gedit نبود بلکه اشکال از GTK بود. در مورد زیم هم مشکل از لایبرری مورد استفاده برای GUI است، یعنی pygtk. همونطور که از اسم pygtk پیداست این برنامه در حقیقت چیزی جز یک wrapper پایتون برای GTK نیست. بنابراین انتظار داشتم که با آپدیت مشکل برطرف بشه ولی اینطور نشد. حرکت بعدی ثبت باگ برای pygtk بود. اول در باگ‌زیلای پروژه گنوم (که pygtk هم بخشی از اونه) جستجو کردم و مطمئن شدم که قبلا چنین باگی ثبت نشده و بعد [یک باگ][باگ‌پایجی] با شرح ماوقع ثبت کردم.

خوشبختانه سریع جوابهای مفیدی گرفتم. اول اینکه مشخص شد pygtk از برنچ GTK+2 استفاده می‌کنه و ممکنه تغییراتی که در نسخه‌های جدیدتر ‍‍‍`GTK+` اعمال شده به این نسخه Back Port نشده باشه (کار رایجیه، به این معنی که تغییرات به نسخه‌های قدیمی‌تر هم منتقل بشن). ولی با کامنت بعدی مشخص شد که این بک پورت انجام شده ولی ظاهرا نسخه جدیدی با این تغییرات منتشر نشده. برای اطمینان از این موارد مجبورم GTK+2 رو دانلود و بیلد کنم و مطمئن بشم که تغییرات به درستی در اون لحاظ شدند. بعد نوبت بیلد و تست آخرین نسخه منتشر شده‌ی pygtk خواهد بود. 

این کارها زمانبره. مثلا الان مشغول نصب jhbuild هستم که ابزاری است برای بیلد و اجرای دسکتاپ گنوم برای توسعه‌دهندگان. مراحل بعدی رو هم به محض اجرا خواهم نوشت.

## کشف همین باگ در فایرفاکس!
من جدیدا بیشتر از فایرفاکس استفاده می‌کنم و همین الان موقع نوشتن یک پیام در مسج‌باکس توئیتر متوجه شدم اگر متن رو هایلایت کنیم و سعی کنیم با کنترل و کلیدهای جهت متن انتخابی رو تغییر بدیم جهت حرکت نشانگر کیبورد برعکسه! خدایا!

باید برم فایرفاکس رو هم [تعمیر][باگ‌فایرفاکس] کنم.

[زیم]: http://zim-wiki.org/
[باگ‌سیزده‌ساله]: /13-years-old-bug-fixed.html
[باگ‌زیم]: https://github.com/jaap-karssenberg/zim-desktop-wiki/issues/229
[باگ‌پایجی]: https://bugzilla.gnome.org/show_bug.cgi?id=790341
[باگ‌فایرفاکس]: https://bugzilla.mozilla.org/show_bug.cgi?id=1417662
